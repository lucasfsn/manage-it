<form [formGroup]="form">
  <div class="flex flex-col gap-2 sm:flex-row sm:gap-4">
    <button
      mat-icon-button
      [matMenuTriggerFor]="filterMenu"
      class="flex items-center justify-center focus-visible:text-sky-500 focus-visible:outline-none focus-visible:ring-0 active:text-sky-500"
    >
      <mat-icon>filter_list</mat-icon>
    </button>
    <div
      class="flex items-center gap-1 rounded-full bg-orange-200 px-2 py-1 dark:bg-slate-900"
    >
      <label for="name" class="flex items-center">
        <mat-icon>search</mat-icon>
      </label>
      <input
        id="name"
        name="name"
        type="text"
        [placeholder]="'projects.filter.INPUT_PLACEHOLDER' | translate"
        class="bg-transparent focus-visible:outline-none focus-visible:ring-0"
        [formControl]="form.controls.name"
      />
    </div>
  </div>
  <mat-menu #filterMenu="matMenu">
    <div
      class="flex flex-col gap-2 bg-orange-200 px-3 py-2 dark:bg-slate-900"
      matMenuContent
    >
      <div class="flex flex-col gap-4 rounded-md bg-transparent p-2">
        <div class="flex flex-col gap-1">
          <p class="text-center text-sm">
            {{ "projects.filter.MENU_STATUS_TEXT" | translate }}
          </p>
          <mat-radio-group
            id="status"
            name="status"
            class="flex flex-col"
            [formControl]="form.controls.status"
            (click)="$event.stopPropagation()"
          >
            <mat-radio-button [value]="null">{{
              "projects.filter.ALL_FILTER" | translate
            }}</mat-radio-button>
            @for (status of projectStatuses; track status) {
              <mat-radio-button [value]="status">{{
                mapStatus(status)
              }}</mat-radio-button>
            }
          </mat-radio-group>
        </div>
        <mat-checkbox
          id="onlyOwnedByMe"
          name="onlyOwnedByMe"
          [formControl]="form.controls.onlyOwnedByMe"
          (click)="$event.stopPropagation()"
          [checked]="true"
        >
          <span class="text-sm text-gray-700 dark:text-gray-300">{{
            "projects.filter.ONLY_LOGGED_USER_PROJECTS" | translate
          }}</span>
        </mat-checkbox>
      </div>
      <div class="flex justify-end gap-1">
        <button
          mat-button
          (click)="onReset(); $event.stopPropagation()"
          class="px-2 py-1"
        >
          {{ "projects.filter.CLEAR_BUTTON" | translate }}
        </button>
      </div>
    </div>
  </mat-menu>
</form>
